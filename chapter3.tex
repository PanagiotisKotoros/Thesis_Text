\chapter{Αναγνώριση Μουσικών Κειμένων}


\par Η μουσική αποτελεί από τα πρώτα κιόλας χρόνια της ανθρώπινης ζωής πολύ σημαντικό κομμάτι κουλτούρας και έκφρασης. Ως συνέπεια αυτού, με την ανάπτυξη της επιστήμης των υπολογιστών, έχει αυξηθεί το ενδιαφέρον της ψηφιοποίησης μουσικών κειμένων τόσο για την ευκολότερη πρόσβαση σε αυτά, όσο και για την αποθήκευσή τους. Ποια τεχνολογία όμως μπορεί να βοηθήσει στη λύση αυτού του προβλήματος$;$  
\par Το {\en{OCR}} φαίνεται να μπορεί να προσφέρει πολύ σημαντική βοήθεια στην επίλυση του, διότι πρακτικά μιλάμε για την αναγνώριση χειρόγραφων συμβόλων. Αυτή η σκέψη ώθησε στην ανάπτυξη μιας υποκατηγορίας του {\en{OCR}}, το  {\en{OMR (Optical Music Recognition}} ή αυτόματη αναγνώριση χειρόγραφων μουσικών κειμένων. Οι δύο τεχνολογίες είναι αρκετά κοντινές, με την κύρια διαφορά ότι το {\en{OMR}} επιδιώκει την μετάφραση ενός χειρόγραφου μουσικού κειμένου απευθείας σε αναγνώσιμο από υπολογιστή αρχείο. Ο συνεχώς αναπτυσσόμενος τομέας του {\en{OMR}} λοιπόν, πραγματεύεται το πρόβλημα ψηφιοποίησης μουσικών κειμένων. Κάποια σημαντικά πλεονεκτήματα που προκύπτουν από την επίλυση του παραπάνω προβλήματος είναι η μετάφραση τους σε  αναπαραγωγή τους, μουσικολογική ανάλυση, μετάφραση σε άλλα είδη μουσικής (όπως μουσική {\en{Braille}}) και επαναεπεξεργασία. Παρακάτω θα δούμε τις μεθόδους και τους τρόπους με τους οποίους μπορεί να επιτευχθεί η αυτόματη αναγνώριση ενός χειρόγραφου μουσικού κειμένου καθώς και τα προβλήματα που αντιμετωπίζει το {\en{OMR}} και πως προσεγγίζει πιθανές λύσεις. 
%Το πρόγραμμα το οποίο θα υλοποιήσουμε σε επόμενο κεφάλαιο δε θα αναγνωρίζει ολόκληρο κείμενα αλλά μεμονομένες νότες. Συνεπώς η αναφορές αυτού του κεφαλαίου σε μεθόδους θα τεκμηριωθούν καθαρά θεωρητικά.

\par Σε αυτό το σημείο, αξίζει να αναφερθεί ότι υπάρχουν ήδη κάποια προγράμματα αναγνώρισης χειρόγραφων μουσικών κειμένων. Οι επιλογές βέβαια είναι κυρίως ανάμεσα σε δύο κατηγορίες καθεμία από τις οποίες έχει τα δικά της αρνητικά. Στην πρώτη κατηγορία ανήκουν προγράμματα όπως το {\en{Sibelius}} (δημιουργία το 2005), τα οποία δεν αναγνωρίζουν τονικότητα και αξία. Ο χρήστης καλείται να την εισαγάγει επιπρόσθετα. Το πρόβλημα αυτής της μεθόδου είναι ο χρόνος που χρειάζεται να δαπανήσει ο χρήστης προκειμένου να ολοκληρώσει μία παρτιτούρα με πολλές διαφορετικές αξίες ανά μέτρο. Η δεύτερη κατηγορίας περιέχει προγράμματα όπως το {\en{Music Notepad}} (δημιουργία 1998), στην οποία ο χρήστης χρειάζεται να μάθει ένα σύνολο από κινήσεις. Κάθε χειρονομία αντιστοιχεί και σε διαφορετική νότα, παύση, αξία καλύπτοντας όλο το πιθανό φάσμα που μπορεί ο χρήστης να χρειαστεί. Αυτή η κατηγορία, αν και αποδίδει σε πολύ ικανοποιητικό ποσοστό αναγνώρισης, επιβαρύνει τον μουσικό με μία μη απαραίτητη εργασία, να μάθει όλες αυτές τις χειρονομίες.


\section{Μουσική Σημειογραφία}

\par Η μουσική σημειογραφία ανά τους αιώνες εξελίσσεται και αλλάζει. Αυτό συμβαίνει λόγω της προσπάθειας πολλών καλλιτεχνών και μουσικών να αναπαραστήσουν τις μουσικές τους ιδέες με σύμβολα. Η δική μας προσέγγιση θα βασιστεί στην κοινή μουσική σημειογραφία (υπάρχουν και προγράμματα που έχουν ασχοληθεί με άλλες σημειογραφίες όπως μεσαιωνική).
\par Προκειμένου να φτάσουμε στην επίλυση τους προβλήματος χρειάζεται να πρώτα να εξοικειωθούμε με τις διαφοροποιήσεις σε κάθε σημειογραφία. Για να αντιληφθούμε μία σημειογραφία αρκεί να κατανοήσουμε τις πληροφορίες που απεικονίζουν τα μουσικά σύμβολα στα πλαίσιά της. Για παράδειγμα στην κοινή σημειογραφία οι νότες καθορίζονται από τα ακόλουθα τέσσερα στοιχεία:
\begin{enumerate}
\item Ύψος
\item Αξία 
\item Δυναμική
\item Τονικότητα
\end{enumerate}
 
\par Αφού κατανοήσουμε αυτό το σύνολο κανόνων που μπορούν να επηρεάσουν το μουσικό μας κείμενο μπορούμε να συνεχίσουμε τη διαδικασία επίλυσης του προβλήματος.   

\section{Ιστορικά Στοιχεία}
\par Η πρώτη έρευνα στον τομέα του {\en{OMR}} ξεκίνησε το 1966 όταν ο {\en{Dennis Pruslin}} έκανε την πρώτη απόπειρα αυτόματης αναγνώρισης χειρόγραφης μουσικής παρτιτούρας. Το σύστημα του κατάφερε να αναγνωρίσει κεφαλές νοτών και συγχορδίες. Το 1970 ο {\en{Prerau}} εισήγαγε την ιδέα του διαχωρισμού της σαρωμένης εικόνας προκείμενου να ανιχνευτούν βασικά στοιχεία της κάθε σημειογραφίας. Με την ευκολότερη πρόσβαση σε μηχανές οπτικού σαρώματος, το 1980 η έρευνα του τομέα αυξήθηκε σημαντικά. Μία πολύ ενδιαφέρουσα εφεύρεση έλαβε χώρα στην Ιαπωνία το 1984. Ένα ρομπότ με το όνομα {\en{WABOT-2}} ήταν το πρώτο που κατάφερε να αναγνωρίζει απλές νότες και να τις αναπαράγει σε ένα πιάνο. Το 1997 ο {\en{D. Bainbridge}} συγκέντρωσε όλες τις ήδη υπάρχουσες πληροφορίες και πρότεινε μία επεκτάσιμη μέθοδο αναγνώρισης μουσικών κειμένων, το οποίο δε βασιζόταν σε συγκεκριμένα χαρακτηριστικά και σημειογραφία. Όπως αναφέρεται και στη διατριβή του με τίτλο {\en{Extensible Optical Music Recognition}} που δημοσιεύτηκε το 1997 στο πανεπιστήμιο του {\en{ Canterbury}}, τα ήδη υπάρχοντα συστήματα μέχρι τότε έχουν επιτύχει την αναγνώριση περιορισμένου αριθμού μουσικών συνόλων. Η πρόταση του εστιάζει σε έξι σημαντικά βήματα με τα οποία μπορούμε να αυξήσουμε τον αριθμό των αναγνωρίσιμων μουσικών συνόλων. Μαζί με τον {\en{ T. Bell}} κατάφεραν να δημιουργήσουν ένα γενικό πλαίσιο για το {\en{OMR}} το οποίο χρησιμοποιήθηκε από πολλούς ερευνητές.
\par Μία πιο πρόσφατη δημοσίευση στον τομέα έγινε το 2012 από τους {\en{Ana Rebelo, Ichiro Fujinaga, Filipe Paszkiewicz, Andre R.S. Marcal, Carlos Guedes}} και {\en{Jaime S. Cardoso}} με τίτλο {\en{Optical Music Recognition - State-of-the-Art and Open Issues}} και συγκρίνει την απόδοση των μεταγενέστερων αλγορίθμων {\en{OMR}} με τους παλιούς.



\section{Γενικό Πλαίσιο Αναγνώρισης}

\par Το πρόβλημα της αυτόματης αναγνώρισης είναι αρκετά πολύπλοκο και σχετίζεται με αρκετά κομμάτια της επιστήμης των υπολογιστών. Συνεπώς στο παρασκήνιο έχουν εμφανιστεί διάφορες λύσεις. Κάθε λύση ακολουθεί τη δική της πορεία και καταλήγει σε παρόμοιας επιτυχίας αποτελέσματα μέχρι σήμερα. Η βασική μέθοδος που χρησιμοποιεί η πλειοψηφία των υπαρχόντων αλγορίθμων μπορεί να χωριστεί σε τέσσερα βασικά βήματα:
\begin{enumerate}
	\item Επεξεργασία εικόνας
	\item Τμηματοποίηση
	\item Αναγνώριση συμβόλων
	\item Αναδόμηση
\end{enumerate}
Εμείς θα επικεντρωθούμε κυρίως στην αναγνώριση συμβόλων στα επόμενα κεφάλαια. Πάμε λοιπόν να δούμε πως καθένα από αυτά μας οδηγεί στη λύση.

	\subsection{Επεξεργασία Εικόνας}	
	Αρχικά λοιπόν, αναπροσαρμόζουμε την εικόνα έτσι ώστε να κάνουμε τη φάση της αναγνώρισης πιο εύκολη και αποδοτική. Συνήθεις διαδικασίες που λαμβάνουν χώρα κατ' αυτό το βήμα είναι βελτίωση, μορφολογικές αλλαγές, αφαίρεση θορύβων, μετατροπή σε δυαδική μορφή. Λόγω του ότι η πλειοψηφία των συστημάτων {\en{OMR}} χρησιμοποιεί την μετατροπή σε δυαδική μορφή θα αναλύσουμε εκείνη τη διαδικασία.
	\par Κατά τη διαδικασία αυτή η εικόνα που εισάγουμε μετατρέπεται σε δυαδική μορφή. Εκεί γίνεται διαχωρισμός του συμβόλου που μας ενδιαφέρει με το φόντο πάνω στο οποίο είναι γραμμένο. Συνήθως αυτή η διαδικασία γίνεται αυτόματα χωρίς ιδιαίτερη γνώση του περιεχομένου της εικόνας. Αυτό συμβαίνει διότι μειώνοντας τον όγκο του αρχείου γλιτώνουμε σημαντικό χρόνο σε καθένα από τα επόμενα βήματα. Επίσης είναι πολύ ευκολότερο να συντάξουμε αλγόριθμο που επεξεργάζεται εικόνα σε δυαδική μορφή παρά μία έγχρωμη εικόνα.


	\subsection{Τμηματοποίηση}
	Κατά το κομμάτι της τμηματοποίησης τα μουσικά σύμβολα διαχωρίζονται σε μικρότερα κομμάτια. Ανάλογα το δείγμα που καλούμαστε να αναγνωρίσουμε το βήμα αυτό μπορεί να φανεί πολύ χρήσιμο. Για παράδειγμα αν το δείγμα μας δεν αποτελείται από μεμονωμένα μουσικά σύμβολα είναι πολύ πιθανό να αποτελείται από κάποιο μουσικό κείμενο γραμμένο σε πεντάγραμμο. Στην περίπτωση αυτή πριν τη διαδικασία αναγνώρισης είναι απαραίτητο με κάποιο τρόπο να ξεχωρίσουμε τα σύμβολα από το πεντάγραμμο. Με τη μέθοδο του αλγορίθμου συμπίεσης δεδομένων ({\en{run-length encoding}}) είναι εφικτό να διακρίνουμε ποιο κομμάτι αντιστοιχεί στο πεντάγραμμο. Αρκεί να εντοπίσουμε τους πιο συχνά εμφανιζόμενους αριθμούς λευκών και μαύρων πίξελ αντίστοιχα ανά στήλη. Έπειτα μπορούμε να απομονώσουμε τα μουσικά σύμβολα γυρίζοντας σε κάθε στήλη και ψάχνοντας για τα κομμάτια τα οποία διαφοροποιούνται από το μοτίβο των γραμμών του πενταγράμμου. Έπειτα κωδικοποιούμε κάθε σύμβολο με τον αλγόριθμο συμπίεσης δεδομένων.
	\par \textbf{Γραμμές πενταγράμμου:} Μία στοιχειώδης λειτουργία κάθε αλγορίθμου στο {\en{OMR}} είναι η αναγνώριση των γραμμών του πενταγράμμου. Αυτό συμβαίνει διότι οι γραμμές αυτές ορίζουν ένα δισδιάστατο σύστημα συντεταγμένων το οποίο είναι απαραίτητο για την κατανόηση της κοινής μουσικής σημειολογίας.
	\par Δυστυχώς η αναγνώριση αυτή δεν πραγματοποιείται πάντα με απόλυτη επιτυχία. Υπάρχει περίπτωση οι γραμμές αυτές να μην είναι σωστά ζωγραφισμένες και να χαλάει η παραλληλία τους ή ακόμη και να διαφέρουν σε πάχος. Παρά το γεγονός ότι υπάρχουν αρκετές μέθοδοι για αυτή τη διαδικασία καμία δεν επιτυγχάνει το απόλυτο ποσοστό επιτυχίας. Η πιο συνηθισμένη μέθοδος που χρησιμοποιείται από τους πιο στοιχειώδεις αλγορίθμους είναι η οριζόντια προβολή. Η μέθοδος αυτή μετατρέπει τη δυαδική εικόνα σε ιστόγραμμα συγκριτικά με το πόσα μαύρα πίξελ υπάρχουν σε κάθε σειρά. Από τη στιγμή που οι γραμμές αυτές είναι οριζόντιες, ο αλγόριθμος εύκολα τις αναγνωρίζει σαν τα τοπικά μέγιστα κάθε γραμμής. Ακόμη και σήμερα ένας τρόπος ο οποίος θα αποδίδει σε κάθε περίπτωση παραμένει άλυτο πρόβλημα στον τομέα του {\en{OMR}}.
 \par \textbf{Μουσικά σύμβολα:} Μετά την αναγνώριση των γραμμών σειρά έχουν τα μουσικά σύμβολα. Αρχικά πρέπει να τα απομονώσουμε. Αυτό μπορεί να πραγματοποιηθεί είτε αφαιρώντας τις γραμμές είτε αγνοώντας τις. Υπάρχουν διάφορα επιχειρήματα που υποστηρίζουν και τις δύο μεθόδους και η επιλογή ανάμεσα σε αυτές τις δύο είναι καθαρά περιστασιακή. Ένα παράδειγμα ενός απλού αλγόριθμου αφαίρεσης γραμμών είναι το εξής. Ξεκινάμε να αφαιρούμε κομμάτι κομμάτι τη γραμμή αντικαθιστώντας τα μαύρα πίξελ που την ορίζουν με λευκά. Ελέγχουμε την τριγύρω περιοχή προκειμένου να αποφύγουμε, όσο το δυνατόν περισσότερο, να αλλοιώσουμε κάποιο σύμβολο. Το πρόβλημα είναι ότι όσο προσεκτική δουλειά και να κάνει ο αλγόριθμος μας είναι σχεδόν σίγουρο ότι μέρος του του συμβόλου θα σβηστεί σαν μέρος γραμμής. Αυτό συμβαίνει διότι τα μουσικά σύμβολα έχουν καμπύλες ή κομμάτια που ακουμπούν εφαπτομενικά σε γραμμές.
 \par Έπειτα το σύμβολο χωρίζεται σε τμήματα τα οποία ονομάζονται περιοχές ενδιαφέροντος. Έτσι μπορούμε να εξετάσουμε τα χαρακτηριστικά που διαφοροποιούν κάθε σύμβολο (κεφαλή, στέμμα, ουρά, παύση) συγκρίνοντας συγκεκριμένα κομμάτια του. Η μέθοδος αυτή βέβαια διαφέρει από αλγόριθμο σε αλγόριθμο. Για παράδειγμα υπάρχουν μέθοδοι κατά τις οποίες εξετάζουν τα σύμβολο σαν συνολικές οντότητες χωρίς να τα διαχωρίζουν.    

	\subsection{Αναγνώριση Συμβόλων}
	Το βήμα στο οποίο θα επικεντρωθεί η εργασία. Κατά το βήμα αυτό τα κομμάτια που έχουμε διαχωρίσει εισάγονται στον αλγόριθμο κατηγοριοποίησης. Εκεί ο αλγόριθμος προσπαθεί συγκρίνοντας τα σύμβολα μας με τα προκαθορισμένα σύμβολα να τους προσδώσει μία ετικέτα. Υπάρχουν βέβαια πιθανές αστοχίες και σε αυτό το βήμα. Αυτές μπορούν να προκύψουν είτε λόγω λανθασμένης αποκοπής μέρους του συμβόλου είτε  από περίπλοκα σύμβολα που το σχέδιο τους έχει τέμνουσες μεταξύ τους γραμμές. Πρόκειται λοιπόν για μία αρκετά λεπτή διαδικασία η οποία πολλές φορές συνδυάζεται με το προηγούμενο βήμα.
	\par Τα κύρια κομμάτια τα οποία διαχωρίσαμε βοηθούν τον αλγόριθμο κατηγοριοποίησης να τελειώσει τη ζητούμενη διαδικασία. Οι αλγόριθμοι κατηγοριοποίησης είναι διάφοροι και καθένας από αυτούς λειτουργεί με τη δική του μέθοδο. Στα επόμενα κεφάλαια καθώς και στην εφαρμογή που θα εξετάσουμε, θα ασχοληθούμε με τη μέθοδο κοντινότερων γειτόνων ({\en{KNN}}) και με τα {\en{Support Vector Machines}} και θα παρουσιάσουμε τα μαθηματικά που κρύβονται πίσω από τις μεθόδους αυτές. Το επόμενο κεφάλαιο θα παρουσιάσει τους τρόπους λειτουργίας των αλγορίθμων αυτών.
	
	
	
	\subsection{Σημασιολογική Αναδόμηση}
	Η αναπόφευκτη διαδικασία που κάθε σύστημα {\en{OMR}} είναι αναδημιουργήσει τη μουσική σημασιολογία από προηγουμένως αναγνωρισμένα γραφικά πρότυπα. Οι πληροφορίες αυτές αποθηκεύονται σε μια κατάλληλη δομή δεδομένων. Αυτή η διαδικασία απαιτεί υποχρεωτικά μία ερμηνεία της σχέσης μεταξύ των αντικείμενων που βρίσκονται στην εικόνα. Οι σχέσεις στην κοινή μουσική σημειογραφία είναι ουσιαστικά δύο διαστάσεων και οι πληροφορίες θέσεων είναι πολύ σημαντικές. Για παράδειγμα, μία τελεία μπορεί να αλλάξει τη διάρκεια ενός συμβόλου, αν είναι τοποθετημένη στα δεξιά της κεφαλής του.
	\par Τέτοιοι μουσικοί συντακτικοί κανόνες μπορούν να επισημανθούν χρησιμοποιώντας γραμματικές. Οι κανόνες της γραμματικής θα καθιστούν σημασιολογικά έγκυρους τους μουσικούς συμβολισμούς. Επίσης θα καθορίζουν με ποιο τρόπο θα πρέπει να κατανεμηθούν τα μουσικά χαρακτηριστικά.
	\par Η τελευταία και θεμελιώδης πτυχή των συστημάτων μας είναι ο μετασχηματισμός των σημειολογικά αναγνωρισμένων αποτελεσμάτων σε μορφή κωδικοποίησης. Η κωδικοποίηση αυτή θα είναι ουσιαστικά ένα μοντέλο του μουσικού συμβόλου που αναγνωρίσαμε. Έπειτα αποθηκεύουμε τα νέα μας δεδομένα στην κατάλληλη μορφή για το σύστημα το οποίο χρησιμοποιούμε.